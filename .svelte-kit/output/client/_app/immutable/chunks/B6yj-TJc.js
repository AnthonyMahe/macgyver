import{S as e,Y as t,a0 as r,V as n,a1 as a,a2 as o,a3 as s,L as i,y as l,a4 as c,Z as u,n as f,s as d}from"./B93ebTeG.js";class p extends e{$$prop_def;$$events_def;$$slot_def;constructor(e){if(!e||!e.target&&!e.$$inline)throw new Error("'target' is a required option");super()}$destroy(){super.$destroy(),this.$destroy=()=>{}}$capture_state(){}$inject_state(){}}const h=Object.freeze(Object.defineProperty({__proto__:null,SvelteComponent:p,SvelteComponentTyped:class extends p{},afterUpdate:t,beforeUpdate:r,createEventDispatcher:n,getAllContexts:a,getContext:o,hasContext:s,onDestroy:i,onMount:l,setContext:c,tick:u},Symbol.toStringTag,{value:"Module"}));class m{constructor(e,t){this.status=e,this.body="string"==typeof t?{message:t}:t||{message:`Error: ${e}`}}toString(){return JSON.stringify(this.body)}}class g{constructor(e,t){this.status=e,this.location=t}}class w extends Error{constructor(e,t,r){super(r),this.status=e,this.text=t}}function v(e){for(const t in e)e[t]=decodeURIComponent(e[t]);return e}function y({href:e}){return e.split("#")[0]}new URL("sveltekit-internal://"),new TextEncoder,new TextDecoder;const b=window.fetch;window.fetch=(e,t)=>("GET"!==(e instanceof Request?e.method:t?.method||"GET")&&_.delete(k(e)),b(e,t));const _=new Map;function k(e,t){let r=`script[data-sveltekit-fetched][data-url=${JSON.stringify(e instanceof Request?e.url:e)}]`;if(t?.headers||t?.body){const e=[];t.headers&&e.push([...new Headers(t.headers)].join(",")),t.body&&("string"==typeof t.body||ArrayBuffer.isView(t.body))&&e.push(t.body),r+=`[data-hash="${function(...e){let t=5381;for(const r of e)if("string"==typeof r){let e=r.length;for(;e;)t=33*t^r.charCodeAt(--e)}else{if(!ArrayBuffer.isView(r))throw new TypeError("value must be a string or TypedArray");{const e=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);let n=e.length;for(;n;)t=33*t^e[--n]}}return(t>>>0).toString(36)}(...e)}"]`}return r}const S=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function E(e){return""!==e&&!/^\([^)]+\)$/.test(e)}function R(e){return e.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}function $({nodes:e,server_loads:t,dictionary:r,matchers:n}){const a=new Set(t);return Object.entries(r).map(([t,[r,a,i]])=>{const{pattern:l,params:c}=function(e){const t=[];var r;return{pattern:"/"===e?/^\/$/:new RegExp(`^${(r=e,r.slice(1).split("/").filter(E)).map(e=>{const r=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(e);if(r)return t.push({name:r[1],matcher:r[2],optional:!1,rest:!0,chained:!0}),"(?:/([^]*))?";const n=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(e);if(n)return t.push({name:n[1],matcher:n[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!e)return;const a=e.split(/\[(.+?)\](?!\])/);return"/"+a.map((e,r)=>{if(r%2){if(e.startsWith("x+"))return R(String.fromCharCode(parseInt(e.slice(2),16)));if(e.startsWith("u+"))return R(String.fromCharCode(...e.slice(2).split("-").map(e=>parseInt(e,16))));const n=S.exec(e),[,o,s,i,l]=n;return t.push({name:i,matcher:l,optional:!!o,rest:!!s,chained:!!s&&1===r&&""===a[0]}),s?"([^]*?)":o?"([^/]*)?":"([^/]+?)"}return R(e)}).join("")}).join("")}/?$`),params:t}}(t),u={id:t,exec:e=>{const t=l.exec(e);if(t)return function(e,t,r){const n={},a=e.slice(1),o=a.filter(e=>void 0!==e);let s=0;for(let i=0;i<t.length;i+=1){const e=t[i];let l=a[i-s];if(e.chained&&e.rest&&s&&(l=a.slice(i-s,i+1).filter(e=>e).join("/"),s=0),void 0!==l){if(!e.matcher||r[e.matcher](l)){n[e.name]=l;const r=t[i+1],c=a[i+1];r&&!r.rest&&r.optional&&c&&e.chained&&(s=0),r||c||Object.keys(n).length!==o.length||(s=0);continue}if(!e.optional||!e.chained)return;s++}else e.rest&&(n[e.name]="")}if(!s)return n}(t,c,n)},errors:[1,...i||[]].map(t=>e[t]),layouts:[0,...a||[]].map(s),leaf:o(r)};return u.errors.length=u.layouts.length=Math.max(u.errors.length,u.layouts.length),u});function o(t){const r=t<0;return r&&(t=~t),[r,e[t]]}function s(t){return void 0===t?t:[a.has(t),e[t]]}}function x(e,t=JSON.parse){try{return t(sessionStorage[e])}catch{}}function U(e,t,r=JSON.stringify){const n=r(t);try{sessionStorage[e]=n}catch{}}const L=[];function A(e,t=f){let r;const n=new Set;function a(t){if(d(e,t)&&(e=t,r)){const t=!L.length;for(const r of n)r[1](),L.push(r,e);if(t){for(let e=0;e<L.length;e+=2)L[e][0](L[e+1]);L.length=0}}}function o(t){a(t(e))}return{set:a,update:o,subscribe:function(s,i=f){const l=[s,i];return n.add(l),1===n.size&&(r=t(a,o)||f),s(e),()=>{n.delete(l),0===n.size&&r&&(r(),r=null)}}}}const C=globalThis.__sveltekit_a9aqrf?.base??"",T=globalThis.__sveltekit_a9aqrf?.assets??C??"",O="sveltekit:snapshot",P="sveltekit:scroll",j="sveltekit:states",I="sveltekit:history",q="sveltekit:navigation",D={tap:1,hover:2,viewport:3,eager:4,off:-1,false:-1},N=location.origin;function V(e){if(e instanceof URL)return e;let t=document.baseURI;if(!t){const e=document.getElementsByTagName("base");t=e.length?e[0].href:document.URL}return new URL(e,t)}function M(){return{x:pageXOffset,y:pageYOffset}}function B(e,t){return e.getAttribute(`data-sveltekit-${t}`)}const F={...D,"":D.hover};function W(e){let t=e.assignedSlot??e.parentNode;return 11===t?.nodeType&&(t=t.host),t}function z(e,t){for(;e&&e!==t;){if("A"===e.nodeName.toUpperCase()&&e.hasAttribute("href"))return e;e=W(e)}}function G(e,t,r){let n;try{if(n=new URL(e instanceof SVGAElement?e.href.baseVal:e.href,document.baseURI),r&&n.hash.match(/^#[^/]/)){const e=location.hash.split("#")[1]||"/";n.hash=`#${e}${n.hash}`}}catch{}const a=e instanceof SVGAElement?e.target.baseVal:e.target;return{url:n,external:!n||!!a||X(n,t,r)||(e.getAttribute("rel")||"").split(/\s+/).includes("external"),target:a,download:n?.origin===N&&e.hasAttribute("download")}}function J(e){let t=null,r=null,n=null,a=null,o=null,s=null,i=e;for(;i&&i!==document.documentElement;)null===n&&(n=B(i,"preload-code")),null===a&&(a=B(i,"preload-data")),null===t&&(t=B(i,"keepfocus")),null===r&&(r=B(i,"noscroll")),null===o&&(o=B(i,"reload")),null===s&&(s=B(i,"replacestate")),i=W(i);function l(e){switch(e){case"":case"true":return!0;case"off":case"false":return!1;default:return}}return{preload_code:F[n??"off"],preload_data:F[a??"off"],keepfocus:l(t),noscroll:l(r),reload:l(o),replace_state:l(s)}}function K(e){const t=A(e);let r=!0;return{notify:function(){r=!0,t.update(e=>e)},set:function(e){r=!1,t.set(e)},subscribe:function(e){let n;return t.subscribe(t=>{(void 0===n||r&&t!==n)&&e(n=t)})}}}const Y={v:()=>{}};function H(){const{set:e,subscribe:t}=A(!1);let r;return{subscribe:t,check:async function(){clearTimeout(r);try{const t=await fetch(`${T}/_app/version.json`,{headers:{pragma:"no-cache","cache-control":"no-cache"}});if(!t.ok)return!1;const n="1761809380243"!==(await t.json()).version;return n&&(e(!0),Y.v(),clearTimeout(r)),n}catch{return!1}}}}function X(e,t,r){return e.origin!==N||!e.pathname.startsWith(t)||!!r&&e.pathname!==t+"/"&&e.pathname!==t+"/index.html"&&("file:"!==e.protocol||e.pathname.replace(/\/[^/]+\.html?$/,"")!==t)}function Z(e){}function Q(e){return e instanceof m||e instanceof w?e.status:500}let ee,te,re;l.toString().includes("$$")||/function \w+\(\) \{\}/.test(l.toString())?(ee={data:{},form:null,error:null,params:{},route:{id:null},state:{},status:-1,url:new URL("https://example.com")},te={current:null},re={current:!1}):(ee=new class{data=$state.raw({});form=$state.raw(null);error=$state.raw(null);params=$state.raw({});route=$state.raw({id:null});state=$state.raw({});status=$state.raw(-1);url=$state.raw(new URL("https://example.com"))},te=new class{current=$state.raw(null)},re=new class{current=$state.raw(!1)},Y.v=()=>re.current=!0);const{tick:ne}=h,ae=new Set(["icon","shortcut icon","apple-touch-icon"]),oe=x(P)??{},se=x(O)??{},ie={url:K({}),page:K({}),navigating:A(null),updated:H()};function le(e){oe[e]=M()}function ce(e,t=!1){return t?location.replace(e.href):location.href=e.href,new Promise(()=>{})}async function ue(){if("serviceWorker"in navigator){const e=await navigator.serviceWorker.getRegistration(C||"/");e&&await e.update()}}function fe(){}let de,pe,he,me,ge,we;const ve=[],ye=[];let be=null;function _e(){be?.fork?.then(e=>e?.discard()),be=null}const ke=new Map,Se=new Set,Ee=new Set,Re=new Set;let $e,xe,Ue,Le,Ae={branch:[],error:null,url:null},Ce=!1,Te=!1,Oe=!0,Pe=!1,je=!1,Ie=!1,qe=!1;const De=new Set,Ne=new Map;async function Ve(e,t,r){globalThis.__sveltekit_a9aqrf?.data&&globalThis.__sveltekit_a9aqrf.data,document.URL!==location.href&&(location.href=location.href),we=e,await(e.hooks.init?.()),de=$(e),me=document.documentElement,ge=t,pe=e.nodes[0],he=e.nodes[1],pe(),he(),xe=history.state?.[I],Ue=history.state?.[q],xe||(xe=Ue=Date.now(),history.replaceState({...history.state,[I]:xe,[q]:Ue},""));const n=oe[xe];function a(){n&&(history.scrollRestoration="manual",scrollTo(n.x,n.y))}r?(a(),await async function(e,{status:t=200,error:r,node_ids:n,params:a,route:o,server_route:s,data:i,form:l}){Ce=!0;const c=new URL(location.href);let u,f;({params:a={},route:o={id:null}}=await et(c,!1)||{}),u=de.find(({id:e})=>e===o.id);let d=!0;try{const e=n.map(async(t,r)=>{const n=i[r];var s;return n?.uses&&(n.uses=(s=n.uses,{dependencies:new Set(s?.dependencies??[]),params:new Set(s?.params??[]),parent:!!s?.parent,route:!!s?.route,url:!!s?.url,search_params:new Set(s?.search_params??[])})),Je({loader:we.nodes[t],url:c,params:a,route:o,parent:async()=>{const t={};for(let n=0;n<r;n+=1)Object.assign(t,(await e[n]).data);return t},server_data_node:Ye(n)})}),s=await Promise.all(e);if(u){const e=u.layouts;for(let t=0;t<e.length;t++)e[t]||s.splice(t,0,void 0)}f=Ge({url:c,params:a,branch:s,status:t,error:r,form:l,route:u??null})}catch(p){if(p instanceof g)return void(await ce(new URL(p.location,location.href)));f=await Qe({status:Q(p),error:await ot(p,{url:c,params:a,route:o}),url:c,route:o}),e.textContent="",d=!1}f.props.page&&(f.props.page.state={}),ze(f,e,d)}(ge,r)):(await nt({type:"enter",url:V(we.hash?ut(new URL(location.href)):location.href),replace_state:!0}),a()),function(){history.scrollRestoration="manual",addEventListener("beforeunload",e=>{let t=!1;if(Fe(),!Pe){const e=lt(Ae,void 0,null,"leave"),r={...e.navigation,cancel:()=>{t=!0,e.reject(new Error("navigation cancelled"))}};Se.forEach(e=>e(r))}t?(e.preventDefault(),e.returnValue=""):history.scrollRestoration="auto"}),addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&Fe()}),navigator.connection?.saveData||function(){let e,t,r;function n(e){e.defaultPrevented||o(e.composedPath()[0],D.tap)}me.addEventListener("mousemove",t=>{const r=t.target;clearTimeout(e),e=setTimeout(()=>{o(r,D.hover)},20)}),me.addEventListener("mousedown",n),me.addEventListener("touchstart",n,{passive:!0});const a=new IntersectionObserver(e=>{for(const t of e)t.isIntersecting&&(We(new URL(t.target.href)),a.unobserve(t.target))},{threshold:0});async function o(e,n){const a=z(e,me);if(!a||a===t&&n>=r)return;const{url:o,external:s,download:i}=G(a,C,we.hash);if(s||i)return;const l=J(a),c=o&&tt(Ae.url)===tt(o);if(!l.reload&&!c)if(n<=l.preload_data){t=a,r=D.tap;const e=await et(o,!1);if(!e)return;!async function(e){if(e.id!==be?.id){const t={};De.add(t),be={id:e.id,token:t,promise:Xe({...e,preload:t}).then(e=>(De.delete(t),"loaded"===e.type&&e.state.error&&_e(),e)),fork:null}}be.promise}(e)}else n<=l.preload_code&&(t=a,r=n,We(o))}function s(){a.disconnect();for(const e of me.querySelectorAll("a")){const{url:t,external:r,download:n}=G(e,C,we.hash);if(r||n)continue;const o=J(e);o.reload||(o.preload_code===D.viewport&&a.observe(e),o.preload_code===D.eager&&We(t))}}Re.add(s),s()}(),me.addEventListener("click",async t=>{if(t.button||1!==t.which)return;if(t.metaKey||t.ctrlKey||t.shiftKey||t.altKey)return;if(t.defaultPrevented)return;const r=z(t.composedPath()[0],me);if(!r)return;const{url:n,external:a,target:o,download:s}=G(r,C,we.hash);if(!n)return;if("_parent"===o||"_top"===o){if(window.parent!==window)return}else if(o&&"_self"!==o)return;const i=J(r);if(!(r instanceof SVGAElement)&&n.protocol!==location.protocol&&"https:"!==n.protocol&&"http:"!==n.protocol)return;if(s)return;const[l,c]=(we.hash?n.hash.replace(/^#/,""):n.href).split("#"),u=l===y(location);if(!a&&(!i.reload||u&&c)){if(void 0!==c&&u){const[,a]=Ae.url.href.split("#");if(a===c){if(t.preventDefault(),""===c||"top"===c&&null===r.ownerDocument.getElementById("top"))scrollTo({top:0});else{const e=r.ownerDocument.getElementById(decodeURIComponent(c));e&&(e.scrollIntoView(),e.focus())}return}if(je=!0,le(xe),e(n),!i.replace_state)return;je=!1}t.preventDefault(),await new Promise(e=>{requestAnimationFrame(()=>{setTimeout(e,0)}),setTimeout(e,100)}),await nt({type:"link",url:n,keepfocus:i.keepfocus,noscroll:i.noscroll,replace_state:i.replace_state??n.href===location.href,event:t})}else rt({url:n,type:"link",event:t})?Pe=!0:t.preventDefault()}),me.addEventListener("submit",e=>{if(e.defaultPrevented)return;const t=HTMLFormElement.prototype.cloneNode.call(e.target),r=e.submitter;if("_blank"===(r?.formTarget||t.target))return;if("get"!==(r?.formMethod||t.method))return;const n=new URL(r?.hasAttribute("formaction")&&r?.formAction||t.action);if(X(n,C,!1))return;const a=e.target,o=J(a);if(o.reload)return;e.preventDefault(),e.stopPropagation();const s=new FormData(a,r);n.search=new URLSearchParams(s).toString(),nt({type:"form",url:n,keepfocus:o.keepfocus,noscroll:o.noscroll,replace_state:o.replace_state??n.href===location.href,event:e})}),addEventListener("popstate",async t=>{if(!it)if(t.state?.[I]){const r=t.state[I];if(Le={},r===xe)return;const n=oe[r],a=t.state[j]??{},o=new URL(t.state["sveltekit:pageurl"]??location.href),s=t.state[q],i=!!Ae.url&&y(location)===y(Ae.url);if(s===Ue&&(Ie||i))return a!==ee.state&&(ee.state=a),e(o),oe[xe]=M(),n&&scrollTo(n.x,n.y),void(xe=r);const l=r-xe;await nt({type:"popstate",url:o,popped:{state:a,scroll:n,delta:l},accept:()=>{xe=r,Ue=s},block:()=>{history.go(-l)},nav_token:Le,event:t})}else je||(e(new URL(location.href)),we.hash&&location.reload())}),addEventListener("hashchange",()=>{je&&(je=!1,history.replaceState({...history.state,[I]:++xe,[q]:Ue},"",location.href))});for(const t of document.querySelectorAll("link"))ae.has(t.rel)&&(t.href=t.href);function e(e){Ae.url=ee.url=e,ie.page.set(ct(ee)),ie.page.notify()}addEventListener("pageshow",e=>{e.persisted&&ie.navigating.set(te.current=null)})}()}function Me(e){ye.some(e=>e?.snapshot)&&(se[e]=ye.map(e=>e?.snapshot?.capture()))}function Be(e){se[e]?.forEach((e,t)=>{ye[t]?.snapshot?.restore(e)})}function Fe(){le(xe),U(P,oe),Me(Ue),U(O,se)}async function We(e){const t=(await et(e,!1))?.route;t&&await Promise.all([...t.layouts,t.leaf].map(e=>e?.[1]()))}function ze(e,t,r){Ae=e.state;const n=document.querySelector("style[data-sveltekit]");if(n&&n.remove(),Object.assign(ee,e.props.page),$e=new we.root({target:t,props:{...e.props,stores:ie,components:ye},hydrate:r,sync:!1}),Be(Ue),r){const e={from:null,to:{params:Ae.params,route:{id:Ae.route?.id??null},url:new URL(location.href)},willUnload:!1,type:"enter",complete:Promise.resolve()};Re.forEach(t=>t(e))}Te=!0}function Ge({url:e,params:t,branch:r,status:n,error:a,route:o,form:s}){let i="never";if(!C||e.pathname!==C&&e.pathname!==C+"/")for(const m of r)void 0!==m?.slash&&(i=m.slash);else i="always";var l,c;e.pathname=(c=i,"/"===(l=e.pathname)||"ignore"===c?l:"never"===c?l.endsWith("/")?l.slice(0,-1):l:"always"!==c||l.endsWith("/")?l:l+"/"),e.search=e.search;const u={type:"loaded",state:{url:e,params:t,branch:r,error:a,route:o},props:{constructors:(f=r,f.filter(e=>null!=e)).map(e=>e.node.component),page:ct(ee)}};var f;void 0!==s&&(u.props.form=s);let d={},p=!ee,h=0;for(let m=0;m<Math.max(r.length,Ae.branch.length);m+=1){const e=r[m],t=Ae.branch[m];e?.data!==t?.data&&(p=!0),e&&(d={...d,...e.data},p&&(u.props[`data_${h}`]=d),h+=1)}return(!Ae.url||e.href!==Ae.url.href||Ae.error!==a||void 0!==s&&s!==ee.form||p)&&(u.props.page={error:a,params:t,route:{id:o?.id??null},state:{},status:n,url:new URL(e),form:s??null,data:p?d:ee.data}),u}async function Je({loader:e,parent:t,url:r,params:n,route:a,server_data_node:o}){const s={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1,search_params:new Set},i=await e();return{node:i,loader:e,server:o,universal:i.universal?.load?{type:"data",data:null,uses:s}:null,data:o?.data??null,slash:i.universal?.trailingSlash??o?.slash}}function Ke(e,t,r){let n=e instanceof Request?e.url:e;const a=new URL(n,r);a.origin===r.origin&&(n=a.href.slice(r.origin.length));const o=Te?function(e,t,r){if(_.size>0){const t=k(e,r),n=_.get(t);if(n){if(performance.now()<n.ttl&&["default","force-cache","only-if-cached",void 0].includes(r?.cache))return new Response(n.body,n.init);_.delete(t)}}return window.fetch(t,r)}(n,a.href,t):function(e,t){const r=k(e,t),n=document.querySelector(r);if(n?.textContent){n.remove();let{body:e,...t}=JSON.parse(n.textContent);const a=n.getAttribute("data-ttl");return a&&_.set(r,{body:e,init:t,ttl:1e3*Number(a)}),null!==n.getAttribute("data-b64")&&(e=function(e){const t=atob(e),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}(e)),Promise.resolve(new Response(e,t))}return window.fetch(e,t)}(n,t);return{resolved:a,promise:o}}function Ye(e,t){return"data"===e?.type?e:"skip"===e?.type?t??null:null}function He({error:e,url:t,route:r,params:n}){return{type:"loaded",state:{error:e,url:t,route:r,params:n,branch:[]},props:{page:ct(ee),constructors:[]}}}async function Xe({id:e,invalidating:t,url:r,params:n,route:a,preload:o}){if(be?.id===e)return De.delete(be.token),be.promise;const{errors:s,layouts:i,leaf:l}=a,c=[...i,l];s.forEach(e=>e?.().catch(()=>{})),c.forEach(e=>e?.[1]().catch(()=>{}));const u=!!Ae.url&&e!==tt(Ae.url),f=!!Ae.route&&a.id!==Ae.route.id,d=function(e,t){if(!e)return new Set(t.searchParams.keys());const r=new Set([...e.searchParams.keys(),...t.searchParams.keys()]);for(const n of r){const a=e.searchParams.getAll(n),o=t.searchParams.getAll(n);a.every(e=>o.includes(e))&&o.every(e=>a.includes(e))&&r.delete(n)}return r}(Ae.url,r);let p=!1;const h=c.map(async(e,t)=>{if(!e)return;const o=Ae.branch[t],s=e[1]===o?.loader&&!function(e,t,r,n,a,o){if(qe)return!0;if(!a)return!1;if(a.parent&&e)return!0;if(a.route&&t)return!0;if(a.url&&r)return!0;for(const s of a.search_params)if(n.has(s))return!0;for(const s of a.params)if(o[s]!==Ae.params[s])return!0;for(const s of a.dependencies)if(ve.some(e=>e(new URL(s))))return!0;return!1}(p,f,u,d,o.universal?.uses,n);return s?o:(p=!0,Je({loader:e[1],url:r,params:n,route:a,parent:async()=>{const e={};for(let r=0;r<t;r+=1)Object.assign(e,(await h[r])?.data);return e},server_data_node:Ye(e[0]?{type:"skip"}:null,e[0]?o?.server:void 0)}))});for(const m of h)m.catch(()=>{});const w=[];for(let y=0;y<c.length;y+=1)if(c[y])try{w.push(await h[y])}catch(v){if(v instanceof g)return{type:"redirect",location:v.location};if(De.has(o))return He({error:await ot(v,{params:n,url:r,route:{id:a.id}}),url:r,params:n,route:a});let e,t=Q(v);if(v instanceof m)e=v.body;else{if(await ie.updated.check())return await ue(),await ce(r);e=await ot(v,{params:n,url:r,route:{id:a.id}})}const i=await Ze(y,w,s);return i?Ge({url:r,params:n,branch:w.slice(0,i.idx).concat(i.node),status:t,error:e,route:a}):await at(r,{id:a.id},e,t)}else w.push(void 0);return Ge({url:r,params:n,branch:w,status:200,error:null,route:a,form:t?void 0:null})}async function Ze(e,t,r){for(;e--;)if(r[e]){let n=e;for(;!t[n];)n-=1;try{return{idx:n+1,node:{node:await r[e](),loader:r[e],data:{},server:null,universal:null}}}catch{continue}}}async function Qe({status:e,error:t,url:r,route:n}){const a={};try{return Ge({url:r,params:a,branch:[await Je({loader:pe,url:r,params:a,route:n,parent:()=>Promise.resolve({}),server_data_node:Ye(null)}),{node:await he(),loader:he,universal:null,server:null,data:null}],status:e,error:t,route:null})}catch(o){if(o instanceof g)return async function(e,t){let r;t.invalidateAll&&_e(),await nt({type:"goto",url:V(e),keepfocus:t.keepFocus,noscroll:t.noScroll,replace_state:t.replaceState,state:t.state,redirect_count:0,nav_token:void 0,accept:()=>{t.invalidateAll&&(qe=!0,r=[...Ne.keys()]),t.invalidate&&t.invalidate.forEach(st)}}),t.invalidateAll&&u().then(u).then(()=>{Ne.forEach(({resource:e},t)=>{r?.includes(t)&&e.refresh?.()})})}(new URL(o.location,location.href),{});throw o}}async function et(e,t){if(e&&!X(e,C,we.hash)){const r=await async function(e){const t=e.href;if(ke.has(t))return ke.get(t);let r;try{const n=(async()=>{let t=await we.hooks.reroute({url:new URL(e),fetch:async(t,r)=>Ke(t,r,e).promise})??e;if("string"==typeof t){const r=new URL(e);we.hash?r.hash=t:r.pathname=t,t=r}return t})();ke.set(t,n),r=await n}catch(n){return void ke.delete(t)}return r}(e);if(!r)return;const n=function(e){return(we.hash?e.hash.replace(/^#/,"").replace(/[?#].+/,""):e.pathname.slice(C.length)).split("%25").map(decodeURI).join("%25")||"/"}(r);for(const a of de){const r=a.exec(n);if(r)return{id:tt(e),invalidating:t,route:a,params:v(r),url:e}}}}function tt(e){return(we.hash?e.hash.replace(/^#/,""):e.pathname)+e.search}function rt({url:e,type:t,intent:r,delta:n,event:a}){let o=!1;const s=lt(Ae,r,e,t);void 0!==n&&(s.navigation.delta=n),void 0!==a&&(s.navigation.event=a);const i={...s.navigation,cancel:()=>{o=!0,s.reject(new Error("navigation cancelled"))}};return Pe||Se.forEach(e=>e(i)),o?null:s}async function nt({type:e,url:t,popped:r,keepfocus:n,noscroll:a,replace_state:o,state:s={},redirect_count:i=0,nav_token:l={},accept:c=fe,block:u=fe,event:f}){const d=Le;Le=l;const p=await et(t,!1),h="enter"===e?lt(Ae,p,t,e):rt({url:t,type:e,delta:r?.delta,intent:p,event:f});if(!h)return u(),void(Le===l&&(Le=d));const m=xe,g=Ue;c(),Pe=!0,Te&&"enter"!==h.navigation.type&&ie.navigating.set(te.current=h.navigation);let v=p&&await Xe(p);if(!v){if(X(t,C,we.hash))return await ce(t,o);v=await at(t,{id:null},await ot(new w(404,"Not Found",`Not found: ${t.pathname}`),{url:t,params:{},route:{id:null}}),404,o)}if(t=p?.url||t,Le!==l)return h.reject(new Error("navigation aborted")),!1;if("redirect"===v.type){if(i<20)return await nt({type:e,url:new URL(v.location,t),popped:r,keepfocus:n,noscroll:a,replace_state:o,state:s,redirect_count:i+1,nav_token:l}),void h.fulfil(void 0);v=await Qe({status:500,error:await ot(new Error("Redirect loop"),{url:t,params:{},route:{id:null}}),url:t,route:{id:null}})}else v.props.page.status>=400&&await ie.updated.check()&&(await ue(),await ce(t,o));if(ve.length=0,qe=!1,le(m),Me(g),v.props.page.url.pathname!==t.pathname&&(t.pathname=v.props.page.url.pathname),s=r?r.state:s,!r){const e=o?0:1,r={[I]:xe+=e,[q]:Ue+=e,[j]:s};(o?history.replaceState:history.pushState).call(history,r,"",t),o||function(e,t){let r=xe+1;for(;oe[r];)delete oe[r],r+=1;for(r=t+1;se[r];)delete se[r],r+=1}(0,Ue)}const y=be?.fork;if(be=null,v.props.page.state=s,Te){const e=(await Promise.all(Array.from(Ee,e=>e(h.navigation)))).filter(e=>"function"==typeof e);if(e.length>0){let t=function(){e.forEach(e=>{Re.delete(e)})};e.push(t),e.forEach(e=>{Re.add(e)})}Ae=v.state,v.props.page&&(v.props.page.url=t);const r=y&&await y;r?r.commit():$e.$set(v.props),b=v.props.page,Object.assign(ee,b),Ie=!0}else ze(v,ge,!1);var b;const{activeElement:_}=document,k=[ne()];await Promise.all(k);let S=r?r.scroll:a?M():null;if(Oe){const e=t.hash&&document.getElementById(ft(t));if(S)scrollTo(S.x,S.y);else if(e){e.scrollIntoView();const{top:t,left:r}=e.getBoundingClientRect();S={x:pageXOffset+r,y:pageYOffset+t}}else scrollTo(0,0)}const E=document.activeElement!==_&&document.activeElement!==document.body;n||E||function(e,t=null){const r=document.querySelector("[autofocus]");if(r)r.focus();else{const r=ft(e);if(r&&document.getElementById(r)){const{x:n,y:a}=t??M();setTimeout(()=>{const t=history.state;it=!0,location.replace(`#${r}`),we.hash&&location.replace(e.hash),history.replaceState(t,"",e.hash),scrollTo(n,a),it=!1})}else{const e=document.body,t=e.getAttribute("tabindex");e.tabIndex=-1,e.focus({preventScroll:!0,focusVisible:!1}),null!==t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}const n=getSelection();if(n&&"None"!==n.type){const e=[];for(let t=0;t<n.rangeCount;t+=1)e.push(n.getRangeAt(t));setTimeout(()=>{if(n.rangeCount===e.length){for(let t=0;t<n.rangeCount;t+=1){const r=e[t],a=n.getRangeAt(t);if(r.commonAncestorContainer!==a.commonAncestorContainer||r.startContainer!==a.startContainer||r.endContainer!==a.endContainer||r.startOffset!==a.startOffset||r.endOffset!==a.endOffset)return}n.removeAllRanges()}})}}}(t,S),Oe=!0,v.props.page&&Object.assign(ee,v.props.page),Pe=!1,"popstate"===e&&Be(Ue),h.fulfil(void 0),Re.forEach(e=>e(h.navigation)),ie.navigating.set(te.current=null)}async function at(e,t,r,n,a){return e.origin!==N||e.pathname!==location.pathname||Ce?await ce(e,a):await Qe({status:n,error:r,url:e,route:t})}function ot(e,t){if(e instanceof m)return e.body;const r=Q(e),n=function(e){return e instanceof w?e.text:"Internal Error"}(e);return we.hooks.handleError({error:e,event:t,status:r,message:n})??{message:n}}function st(e){if("function"==typeof e)ve.push(e);else{const{href:t}=new URL(e,location.href);ve.push(e=>e.href===t)}}let it=!1;function lt(e,t,r,n){let a,o;const s=new Promise((e,t)=>{a=e,o=t});return s.catch(()=>{}),{navigation:{from:{params:e.params,route:{id:e.route?.id??null},url:e.url},to:r&&{params:t?.params??null,route:{id:t?.route?.id??null},url:r},willUnload:!t,type:n,complete:s},fulfil:a,reject:o}}function ct(e){return{data:e.data,error:e.error,form:e.form,params:e.params,route:e.route,state:e.state,status:e.status,url:e.url}}function ut(e){const t=new URL(e);return t.hash=decodeURIComponent(e.hash),t}function ft(e){let t;if(we.hash){const[,,r]=e.hash.split("#",3);t=r??""}else t=e.hash.slice(1);return decodeURIComponent(t)}export{Ve as a,Z as l,ie as s};
